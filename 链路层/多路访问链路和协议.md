# 5.3 多路访问链路和协议

两种网络链路：

1. 点对点链路：由链路一端的单个发送方和链路另一端的单个接收方组成。
2. 广播链路：让多个发送和接收结点都连接到相同的、单一的、共享的广播信道上。

多路访问问题：如何协调多个发送和接收结点对一个共享广播信道的访问。

多路访问协议的分类：信道划分协议、随机接入协议和轮流协议。

## 5.3.1 信道划分协议

三种技术：时分多路复用(TDM)、频分多路复用(FDM)、码分多址(CDMA)。

TDM的思想：

1. 将时间划分为时间帧，并进一步划分每个时间帧为N个时隙。通常选择的时隙长度应使一个时隙内可以传送一个分组。
2. 将每个时隙分配给N个结点中的一个。
3. 当有结点有分组要发送的时候，该结点只能在它自己的时隙内传输分组。

    课本第298页介绍了TDM的两个主要缺陷。

FDM的思想：将R bps信道划分为不同的频段，将每个频率分配个N个结点中的一个。

码分多址的思想：

1. CDMA网络对每个结点分配一种不同的编码。
2. 每个结点用它唯一的编码来对它发送的数据进行编码。
3. CDMA中不同的结点可以同时传输，并且它们各自相应的接收方可以正确接收发送方编码的数据比特。

## 5.3.2 随机接入协议

思想：

1. 一个传输结点总是以信道的全部速率进行发送，当发生碰撞时，进行重发
2. 重发该帧前等待一个随机时延
3. 当一个结点选择的时延充分小于其他碰撞结点的时延，就可以无碰撞地将它的帧在信道中发出

随机接入协议：ALOHA协议、载波侦听多路访问(CSMA)协议。

### 1. 时隙ALOHA

思想：

1. 当结点有一个新帧发送时，等到下一个时隙开始并在该时隙传输整个帧。
2. 如果没有碰撞，就成功传输该帧。
3. 如果有碰撞，就在时隙结束之前检测这次碰撞。该结点以概率p在后续的每个时隙中重传该帧，直到该帧无碰撞地传输出去。

    当某结点是唯一活跃的结点时，时隙ALOHA允许该结点以全速R连续传输。

效率：

    当有大量结点有很多帧要传输时，仅有37%的时隙做有用工作

### 2. ALOHA

纯ALOHA的思想：

1. 当一个帧到达时，结点立刻将该帧完整地传输进广播信道。
2. 如果该帧发生碰撞，结点立即以概率p重传该帧。否则等待一个帧传输时间。
3. 在此等待之后，该结点以概率p传输该帧，或者以概率1-p在另一个帧时间等待。

### 4. 具有碰撞检测的载波侦听多路访问(CSMA/CD)

从适配器的角度解释CSMA的思想：

1. 适配器监听信道是否空闲，如果空闲则传输帧，否则等待。
2. 传输过程中适配器监听是否有来自其它适配器的能量。如果有则停止传输帧，否则继续传输。
3. 如果中止帧的传输，则适配器等待一个随机时间量后返回到第一个步骤。

对等待的随机时间量的要求：

    当碰撞结点数量较少时，时间间隔较短。当碰撞结点数量较大时，时间间隔较长。
    二进制指数后退算法：当一个帧经历的碰撞越多，选择的时间间隔越大。

如果所有的结点都进行载波侦听了，为什么当初会发生碰撞？

    课本第303页用一个例子解释了这个问题。

### 5. CSMA/CD效率

效率为$\frac{1}{1+5d_{prop}/d_{trans}}$


## 5.3.3 轮流协议

两种轮流协议：轮询协议、令牌传递协议。

轮询协议的思想：

1. 指定一个结点为主结点
2. 主结点以循环的方式轮询每个结点，并告诉每个结点能够传输的帧的最多数量

    课本第305举出了轮询协议的两个缺点。

令牌传递协议的思想：

1. 一个称为令牌的小的特殊帧在结点之间以某种固定的次序进行交换
2. 当一个结点收到令牌时，如果有帧传输，则发送最大数目的帧数，否则立即向下一个结点转发该令牌。

## 5.3.4 DOCSIS：用于电缆因特网接入的链路层协议

    课本第305～306页有举了电缆接入网的例子，是一个应用多路访问协议很好的例子。